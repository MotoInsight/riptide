<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#000000" />
  <title>Riptide – Embedded TesPush (2000×800)</title>
  <style>
    html, body { height: 100%; }
    html { background: #000; }
    body {
      margin: 0;
      background: #000;          /* true black */
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    /* Gutters for 2331×907 viewport → main = 2000×800
       TOP = 107, RIGHT = 331, BOTTOM = 0, LEFT = 0
    */
    .top-reserved {
      position: fixed;
      top: 0; left: 0; right: 331px; height: 107px;
      display: flex; align-items: center; justify-content: center;
      padding: 0 12px;
      background: #000;
      border-bottom: 1px solid rgba(255,255,255,0.06);
      z-index: 2;
      font-variant-numeric: tabular-nums;
      letter-spacing: .3px;
    }

    .right-reserved {
      position: fixed;
      top: 0; right: 0; bottom: 0; width: 331px;
      background: #000;
      border-left: 1px solid rgba(255,255,255,0.06);
      z-index: 1;
      overflow: auto;
    }

    .main {
      position: fixed;
      top: 107px; right: 331px; bottom: 0; left: 0;
      background: #000;          /* black behind the iframe while it loads */
      z-index: 0;
    }

    .main iframe {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      border: 0;
      background: #000;          /* iframe surface fallback */
    }

    .right-reserved, .top-reserved { -webkit-user-select: none; user-select: none; }
  </style>
</head>
<body>

  <!-- Header shows total WebView viewport size -->
  <div class="top-reserved">
    <span id="vwvh" aria-live="polite">—</span>
  </div>

  <!-- Right gutter for any controls/diagnostics you want -->
  <aside class="right-reserved">
    <div style="padding:12px;">
      <h2 style="margin:12px 0 8px;font-size:16px;">Side Panel (331px reserved)</h2>
      <p style="opacity:.8;line-height:1.4;margin:0 0 12px;">
        The iframe (left) targets <strong>2000×800</strong> within a 2331×907 WebView.
      </p>
      <div id="mainDims" style="opacity:.8;font-size:13px;"></div>
    </div>
  </aside>

  <!-- Main area (iframe fills what remains after top/right gutters; no bottom padding) -->
  <main class="main" role="main" aria-label="TesPush View">
    <iframe
      src="https://tespush.com/"
      allow="autoplay; fullscreen; clipboard-read; clipboard-write"
      referrerpolicy="no-referrer"
      sandbox="allow-scripts allow-forms allow-same-origin allow-popups"
      title="TesPush"
    ></iframe>
  </main>

  <script>
    (function () {
      const vwvh = document.getElementById('vwvh');
      const mainDims = document.getElementById('mainDims');

      // Keep these in one place so CSS/JS stay in sync
      const GUTTER_TOP = 107;
      const GUTTER_RIGHT = 331;
      const GUTTER_BOTTOM = 0;

      function update() {
        // Total WebView viewport in CSS pixels
        const w = Math.round(window.innerWidth);
        const h = Math.round(window.innerHeight);
        vwvh.textContent = `${w} × ${h} px`;

        // Iframe (main area) size = viewport minus gutters
        const iframeW = Math.max(0, w - GUTTER_RIGHT);
        const iframeH = Math.max(0, h - (GUTTER_TOP + GUTTER_BOTTOM));
        if (mainDims) {
          mainDims.textContent =
            `Iframe area: ${iframeW} × ${iframeH} px (target 2000 × 800; top ${GUTTER_TOP}, right ${GUTTER_RIGHT}, bottom ${GUTTER_BOTTOM})`;
        }
      }

      window.addEventListener('load', update, { passive: true });
      window.addEventListener('resize', update, { passive: true });
      window.addEventListener('orientationchange', update, { passive: true });
      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', update, { passive: true });
      }
      update();
    })();
  </script>
</body>
</html>
